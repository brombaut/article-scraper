name: Publish new version to NPM
on:
  workflow_dispatch:
    inputs:
      version_update_type:
        description: "SemVer update version type (patch, minor, or major)"
        required: true
        default: "patch"

jobs:
  my_publish:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout 🛎️
        uses: actions/checkout@v2
        # with:
        #   token: ${{ secrets.GITHUB_TOKEN }}
      - name: npm ci
        run: npm ci
      - name: Bump npm version
        run: npm version ${{ github.event.inputs.version_update_type }}
      - name: Commit from action
        run: |
          git config --global user.name 'Ben Rombaut'
          git config --global user.email 'rombaut.benj@gmail.com'
          git add .
          git commit -m "Commit from action test"
          git push
      # - run: |
      #     echo "version_update_type = ${{ github.event.inputs.version_update_type }}"
      #     echo "npm_token = ${{ github.event.inputs.version_update_type }}"
